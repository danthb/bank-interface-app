"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[133],{2627:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(5861),a=n(885),u=n(7757),o=n.n(u),s=n(2791),i=n(7496),c=n(9818),l=n(1523),d=n(9920),f=n(4171),m=n(9599),p=n(184);function b(e){var t=e.bgcolor,n=e.bgheader,u=e.label,b=e.handle,h=e.hideAmount,x=e.successButton,g=(0,s.useContext)(d.V).authFB,v=(0,s.useState)(!0),j=(0,a.Z)(v,2),Z=j[0],k=j[1],w=(0,s.useState)(""),y=(0,a.Z)(w,2),C=y[0],N=y[1],A=(0,s.useState)(""),S=(0,a.Z)(A,2),F=S[0],L=S[1],U=(0,s.useState)(""),B=(0,a.Z)(U,2),E=B[0],T=B[1],P=(0,s.useState)(""),I=(0,a.Z)(P,2),W=I[0],_=I[1],D=(0,s.useState)(""),R=(0,a.Z)(D,2),V=R[0],z=R[1],M=(0,s.useState)(""),O=(0,a.Z)(M,2),Y=O[0],q=O[1],G=(0,s.useState)(""),H=(0,a.Z)(G,2),J=H[0],K=H[1],Q=function(){var e=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!g){e.next=9;break}return e.next=4,m.A.getUser(g.uid);case 4:return t=e.sent,_(!0),e.abrupt("return",t.data);case 9:_(!1),T(!1);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();function X(e,t){return e?!("password"===t&&e.length<8)||(N("Please enter at least 8 characters"),setTimeout((function(){return N("")}),3e3),!1):(N("Please enter "+t),setTimeout((function(){return N("")}),3e3),!1)}(0,s.useEffect)((function(){h||Q().then((function(e){var t=e[0];T(t.balance)}))}),[Z]);return(0,p.jsx)(f.Z,{bgcolor:t,bgheader:n,header:u,status:C,body:Z?(0,p.jsxs)(s.Fragment,{children:[h?(0,p.jsxs)(s.Fragment,{children:["Login"!==u&&(0,p.jsxs)(s.Fragment,{children:["Name",(0,p.jsx)("br",{}),(0,p.jsx)(c.Z,{name:"name",id:"name",placeholder:"Enter name",value:V,onChange:function(e){return z(e.currentTarget.value)}}),(0,p.jsx)("br",{})]}),(0,p.jsx)("br",{}),"Email ",(0,p.jsx)("br",{}),(0,p.jsx)(c.Z,{name:"email",type:"email",id:"email",placeholder:"Enter email",value:Y,onChange:function(e){return q(e.currentTarget.value)}}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),"Password",(0,p.jsx)("br",{}),(0,p.jsx)(c.Z,{type:"password",id:"password",placeholder:"Enter password",value:J,onChange:function(e){return K(e.currentTarget.value)}}),(0,p.jsx)("br",{})]}):(0,p.jsxs)(s.Fragment,{children:["Balance: ",W?E:null," ",(0,p.jsx)("br",{}),(0,p.jsx)("br",{}),u+" Amount",(0,p.jsx)("br",{}),(0,p.jsx)("input",{type:"input",id:"amount",placeholder:"Enter Amount",value:F,onChange:function(e){isNaN(Number(e.target.value))?alert("Only positive amounts are allowed"):L(e.target.value)}}),(0,p.jsx)("br",{})]}),(0,p.jsx)("br",{}),(0,p.jsx)(i.Z,{type:"submit",id:"submit",title:"Withdraw"===u||"Deposit"===u?"Confirm transaction":"Click to Login",variant:"contained",color:"primary",disabled:function(){if("Create Account"===u)return""===Y&&""===J&&""===V;if("Login"===u)return""===Y&&""===J;if(h){if(!E)return!1;if(E<=0)return!0}else{if("Withdraw"===u)return!E||!W||(""===F||0===F);if("Deposit"===u)return!W||(""===F||0===F)}}(),onClick:function(){if(h){if("Login"!==u&&!X(V,"name"))return;if(!X(Y,"email"))return;if(!X(J,"password"))return}else if(!X(F,"amount"))return;b({name:V,email:Y,password:J,amount:F}),k(!1)},children:u})]}):(0,p.jsxs)(s.Fragment,{children:[(0,p.jsx)(i.Z,{type:"submit",variant:"contained",color:"primary",onClick:function(){z(""),q(""),K(""),L(""),k(!0)},children:x}),"Create Account"===u?(0,p.jsx)(i.Z,{type:"submit",variant:"contained",title:"Click to go the Login",color:"secundary",children:(0,p.jsx)(l.rU,{className:"nav-link",to:"/login",children:"Login"})}):null]})})}},5133:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var r=n(5861),a=n(885),u=n(7757),o=n.n(u),s=n(2791),i=n(2627),c=n(9920),l=n(9599),d=n(184);function f(){var e=(0,s.useContext)(c.V).authFB,t=(0,s.useState)(0),n=(0,a.Z)(t,2),u=n[0],f=n[1],m=(0,s.useState)(!1),p=(0,a.Z)(m,2),b=p[0],h=p[1],x=function(){var t=(0,r.Z)(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=6;break}return t.next=4,l.A.getUser(e.uid);case 4:return n=t.sent,t.abrupt("return",n.data);case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),g=function(e){var t;x().then((function(e){t=e[0],f(t.balance)})).then((0,r.Z)(o().mark((function n(){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(u>0&&u>=Number(e.amount)&&Number(e.amount)>=0)){n.next=9;break}return r=Number(u)-Number(e.amount),f(r),h(!0),n.next=6,l.A.updated(t._id,-e.amount);case 6:alert("Transaction done, your balance is ".concat(Number(u)-Number(e.amount))),n.next=13;break;case 9:if(!(b&&u<Number(e.amount))){n.next=12;break}return alert("You don't have enough money"),n.abrupt("return",!1);case 12:return n.abrupt("return",!1);case 13:return n.abrupt("return",!0);case 14:case"end":return n.stop()}}),n)}))))};return g(),(0,d.jsx)(s.Fragment,{children:(0,d.jsx)(i.Z,{bgcolor:"info",label:"Withdraw",handle:g,hideAmount:!1,successButton:"Make another withdraw"})})}},9599:function(e,t,n){n.d(t,{A:function(){return i}});var r=n(4569),a=n.n(r),u=n(4075).Z.API_URL,o=localStorage.getItem("token"),s=a().create({baseURL:u,headers:{authorization:"Bearer ".concat(o)}}),i={all:function(){return s.get("/account/all")},getUser:function(e){return s.get("/account",{params:{firebaseId:e}})},createUser:function(e){return s.post("/account/create",e)},updated:function(e,t){return s.put("/account/update",{_id:e,amount:t})}}}}]);
//# sourceMappingURL=133.469ada08.chunk.js.map