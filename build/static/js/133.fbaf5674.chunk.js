"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[133],{2627:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(5861),a=n(885),u=n(7757),o=n.n(u),i=n(2791),s=n(7496),c=n(9818),l=n(1523),d=n(6549),f=n(4171),m=n(9599),b=n(184);function p(e){var t=e.bgcolor,n=e.bgheader,u=e.label,p=e.handle,h=e.hideAmount,x=e.successButton,g=(0,i.useContext)(d.V).authFB,v=(0,i.useState)(!0),j=(0,a.Z)(v,2),Z=j[0],w=j[1],k=(0,i.useState)(""),y=(0,a.Z)(k,2),C=y[0],N=y[1],A=(0,i.useState)(""),S=(0,a.Z)(A,2),F=S[0],L=S[1],B=(0,i.useState)(""),E=(0,a.Z)(B,2),T=E[0],U=E[1],I=(0,i.useState)(""),P=(0,a.Z)(I,2),W=P[0],_=P[1],D=(0,i.useState)(""),R=(0,a.Z)(D,2),V=R[0],z=R[1],M=(0,i.useState)(""),O=(0,a.Z)(M,2),Y=O[0],q=O[1],G=(0,i.useState)(""),H=(0,a.Z)(G,2),J=H[0],K=H[1],Q=function(){var e=(0,r.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!g){e.next=9;break}return e.next=4,m.A.all();case 4:return t=e.sent,_(!0),e.abrupt("return",t.data);case 9:_(!1),U(!1);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();function X(e,t){return e?!("password"===t&&e.length<8)||(N("Please enter at least 8 characters"),setTimeout((function(){return N("")}),3e3),!1):(N("Please enter "+t),setTimeout((function(){return N("")}),3e3),!1)}(0,i.useEffect)((function(){h||Q().then((function(e){var t=e.filter((function(e){return e.firebaseId===g.uid}));U(t[0].balance)}))}),[Z]);return(0,b.jsx)(f.Z,{bgcolor:t,bgheader:n,header:u,status:C,body:Z?(0,b.jsxs)(i.Fragment,{children:[h?(0,b.jsxs)(i.Fragment,{children:["Login"!==u&&(0,b.jsxs)(i.Fragment,{children:["Name",(0,b.jsx)("br",{}),(0,b.jsx)(c.Z,{name:"name",id:"name",placeholder:"Enter name",value:V,onChange:function(e){return z(e.currentTarget.value)}}),(0,b.jsx)("br",{})]}),(0,b.jsx)("br",{}),"Email ",(0,b.jsx)("br",{}),(0,b.jsx)(c.Z,{name:"email",type:"email",id:"email",placeholder:"Enter email",value:Y,onChange:function(e){return q(e.currentTarget.value)}}),(0,b.jsx)("br",{}),(0,b.jsx)("br",{}),"Password",(0,b.jsx)("br",{}),(0,b.jsx)(c.Z,{type:"password",id:"password",placeholder:"Enter password",value:J,onChange:function(e){return K(e.currentTarget.value)}}),(0,b.jsx)("br",{})]}):(0,b.jsxs)(i.Fragment,{children:["Balance: ",W?T:null," ",(0,b.jsx)("br",{}),(0,b.jsx)("br",{}),u+" Amount",(0,b.jsx)("br",{}),(0,b.jsx)("input",{type:"input",id:"amount",placeholder:"Enter Amount",value:F,onChange:function(e){isNaN(Number(e.target.value))?alert("Only positive amounts are allowed"):L(e.target.value)}}),(0,b.jsx)("br",{})]}),(0,b.jsx)("br",{}),(0,b.jsx)(s.Z,{type:"submit",id:"submit",title:"Withdraw"===u||"Deposit"===u?"Confirm transaction":"Click to Login",variant:"contained",color:"primary",disabled:function(){if("Create Account"===u)return""===Y&&""===J&&""===V;if("Login"===u)return""===Y&&""===J;if(h){if(!T)return!1;if(T<=0)return!0}else{if("Withdraw"===u)return!T||!W||(""===F||0===F);if("Deposit"===u)return!W||(""===F||0===F)}}(),onClick:function(){if(h){if("Login"!==u&&!X(V,"name"))return;if(!X(Y,"email"))return;if(!X(J,"password"))return}else if(!X(F,"amount"))return;p({name:V,email:Y,password:J,amount:F}),w(!1)},children:u})]}):(0,b.jsxs)(i.Fragment,{children:[(0,b.jsx)(s.Z,{type:"submit",variant:"contained",color:"primary",onClick:function(){z(""),q(""),K(""),L(""),w(!0)},children:x}),"Create Account"===u?(0,b.jsx)(s.Z,{type:"submit",variant:"contained",title:"Click to go the Login",color:"secundary",children:(0,b.jsx)(l.rU,{className:"nav-link",to:"/login",children:"Login"})}):null]})})}},5133:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var r=n(5861),a=n(885),u=n(7757),o=n.n(u),i=n(2791),s=n(2627),c=n(6549),l=n(9599),d=n(184);function f(){var e=(0,i.useContext)(c.V).authFB,t=(0,i.useState)(0),n=(0,a.Z)(t,2),u=n[0],f=n[1],m=(0,i.useState)(!1),b=(0,a.Z)(m,2),p=b[0],h=b[1],x=function(){var t=(0,r.Z)(o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=6;break}return t.next=4,l.A.getUser(e.uid);case 4:return n=t.sent,t.abrupt("return",n.data);case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),g=function(t){var n;x().then((function(t){n=t.filter((function(t){return t.firebaseId===e.uid})),f(n[0].balance)})).then((0,r.Z)(o().mark((function e(){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u>0&&u>=Number(t.amount)&&Number(t.amount)>=0)){e.next=9;break}return r=Number(u)-Number(t.amount),f(r),h(!0),e.next=6,l.A.updated(n[0]._id,-t.amount);case 6:alert("Transaction done, your balance is ".concat(Number(u)-Number(t.amount))),e.next=11;break;case 9:return p&&u<Number(t.amount)&&alert("You don't have enough money"),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)}))))};return g(),(0,d.jsx)(i.Fragment,{children:(0,d.jsx)(s.Z,{bgcolor:"info",label:"Withdraw",handle:g,hideAmount:!1,successButton:"Make another withdraw"})})}},9599:function(e,t,n){n.d(t,{A:function(){return s}});var r=n(4569),a=n.n(r),u=n(4075).Z.API_URL,o=localStorage.getItem("token"),i=a().create({baseURL:u,headers:{authorization:"Bearer ".concat(o)}}),s={all:function(){return i.get("/account/all")},getUser:function(e){return i.get("/account",{params:{firebaseId:e}})},createUser:function(e){return i.post("/account/create",e)},updated:function(e,t){return i.put("/account/update",{_id:e,amount:t})}}}}]);
//# sourceMappingURL=133.fbaf5674.chunk.js.map