{"version":3,"file":"static/js/538.1d67f9bc.chunk.js","mappings":"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","sources":["components/bankform.js","components/deposit.js","services/index.js"],"sourcesContent":["import React, { Fragment, useState, useContext, useEffect } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Link } from 'react-router-dom';\r\nimport { AuthContextFB } from \"../contexts/AuthContextFB\";\r\nimport {Card} from \"../contexts/context\";\r\nimport { accountAPI } from \"../services\";\r\nexport default function BankForm({bgcolor,bgheader,label,handle,hideAmount,successButton}){\r\n\r\n  const { authFB } = useContext(AuthContextFB);\r\n  \r\n  const [show, setShow]         = useState(true);\r\n  const [status, setStatus]     = useState('');\r\n  const [amount, setAmount]       = useState('');\r\n  const [balance, setBalance] = useState('');\r\n  const [userLoged, setUserLogged] = useState('');\r\n\r\n// UserData\r\n  const [name, setName]         = useState('');\r\n  const [email, setEmail]       = useState('');\r\n  const [password, setPassword] = useState('');\r\n\r\n\r\n  const getBalance = async () => {\r\n    try {\r\n      if (authFB) {\r\n        const response = await accountAPI.all();\r\n        setUserLogged(true)\r\n        return response.data;\r\n      }\r\n      else {\r\n        setUserLogged(false)\r\n        setBalance(false)\r\n      }\r\n    }catch (error) {\r\n          console.log(error);\r\n          return\r\n      }   \r\n  }\r\n  useEffect(() => {\r\n    if (!hideAmount) {\r\n      getBalance().then(data => {\r\n        let user = data.filter(user => user.firebaseId === authFB.uid)\r\n        setBalance(user[0].balance)\r\n      })\r\n    }\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [show])\r\n\r\n  function validateDataUser(field, label){\r\n    if (!field) {\r\n      setStatus('Please enter ' + label);\r\n      setTimeout(() => setStatus(''),3000);\r\n      return false;\r\n    }\r\n    if (label === 'password' && field.length < 8) {\r\n      setStatus('Please enter at least 8 characters');\r\n      setTimeout(() => setStatus(''),3000);\r\n      return false\r\n    }\r\n    return true;\r\n  }\r\n  function handleForm(){\r\n    if (hideAmount) {\r\n      if (label !== 'Login') {\r\n        if (!validateDataUser(name,     'name')) return;\r\n      }\r\n      if (!validateDataUser(email,    'email'))    return;\r\n      if (!validateDataUser(password, 'password')) return;\r\n    } else {\r\n      if (!validateDataUser(amount, 'amount')) return;\r\n    }\r\n    let dataUser = {name,email,password,amount}\r\n    handle(dataUser)\r\n    setShow(false);\r\n  }\r\n  const handleAmount = (e) => {\r\n    if (!isNaN(Number(e.target.value))) {\r\n      setAmount(e.target.value)\r\n    } else {\r\n      alert('Only positive amounts are allowed')\r\n    }\r\n  }\r\n  \r\n\r\n  function clean(){\r\n    setName('');\r\n    setEmail('');\r\n    setPassword('');\r\n    setAmount('');\r\n    setShow(true);\r\n  }\r\n  \r\n  const buttonDisabled = () => {\r\n    if (label === 'Create Account') {\r\n      if (email !== '' || password !== '' || name !== '') {\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    }\r\n    if (label === 'Login') {\r\n      if (email !== '' || password !== '') {\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    }\r\n    // buttonDisabled when there isn't user logged\r\n    if (!hideAmount) {\r\n      if (label === 'Withdraw') {\r\n        if (!balance || !userLoged) {\r\n          return true\r\n        }\r\n        if (amount !== '') {\r\n          if (amount !== 0) {\r\n            return false\r\n          } else {\r\n            return true\r\n          }\r\n        } else {\r\n          return true\r\n        }\r\n      } else if (label === 'Deposit') {\r\n        if (!userLoged) {\r\n          return true\r\n        }\r\n        if (amount !== '') {\r\n          if (amount !== 0) {\r\n            return false\r\n          } else {\r\n            return true\r\n          }\r\n        } else {\r\n          return true\r\n        }\r\n      }\r\n    } else if (balance) {\r\n      if (balance <= 0) {\r\n        return true\r\n      }\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n  \r\n  return(\r\n      <Card\r\n            bgcolor={bgcolor}\r\n            bgheader={bgheader}\r\n            header={label}\r\n            status={status}\r\n            body={show ? (\r\n                <Fragment>\r\n                {\r\n                  hideAmount\r\n                  ? <Fragment>\r\n                    {label !== 'Login' &&\r\n                    <Fragment>\r\n                      Name\r\n                        <br />\r\n                        <TextField\r\n                          name='name'\r\n                          id=\"name\"\r\n                          placeholder=\"Enter name\"\r\n                          value={name}\r\n                          onChange={e => setName(e.currentTarget.value)} />\r\n                        <br />\r\n                    </Fragment>\r\n                      }\r\n                      <br />\r\n                      Email <br/>\r\n                      <TextField\r\n                        name=\"email\"\r\n                        type=\"email\"\r\n                        id=\"email\"\r\n                        placeholder=\"Enter email\"\r\n                        value={email}\r\n                        onChange={e => setEmail(e.currentTarget.value)}/>\r\n                      <br />\r\n                      <br />\r\n                      Password<br />\r\n                      <TextField\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        placeholder=\"Enter password\"\r\n                        value={password}\r\n                        onChange={e => setPassword(e.currentTarget.value)} />\r\n                      <br />\r\n                  </Fragment>\r\n                  :\r\n                  <Fragment>\r\n                    Balance: {userLoged ? balance : null} <br/>\r\n                    <br />\r\n                    {label + ' Amount'}\r\n                    <br />\r\n                      <input\r\n                        type=\"input\"\r\n                        id=\"amount\"\r\n                        placeholder={'Enter Amount'}\r\n                        value={amount}\r\n                        onChange={handleAmount} />\r\n                      <br />\r\n                  </Fragment>\r\n                }\r\n                <br />\r\n                <Button\r\n                  type=\"submit\"\r\n                  id='submit'\r\n                  title={(label === 'Withdraw' || label === 'Deposit' ) ? 'Confirm transaction' : 'Click to Login'}\r\n                  variant=\"contained\"\r\n                  color=\"primary\"\r\n                  disabled={buttonDisabled()}\r\n                  onClick={handleForm} >\r\n                  {label}\r\n                </Button>\r\n                </Fragment>\r\n              ):(\r\n                <Fragment>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={clean}>\r\n                    {successButton}\r\n                  </Button>\r\n                  {label === 'Create Account' ? <Button\r\n                    type=\"submit\"\r\n                    variant=\"contained\"\r\n                    title='Click to go the Login'\r\n                    color=\"secundary\">\r\n                    <Link className=\"nav-link\" to=\"/login\">Login</Link>\r\n                  </Button> : null}\r\n                </Fragment>\r\n            )}\r\n            />\r\n       \r\n\r\n  )\r\n}","import React, { useState, useContext, Fragment} from \"react\";\r\nimport BankForm from \"./bankform\";\r\nimport { AuthContextFB } from \"../contexts/AuthContextFB\";\r\nimport { accountAPI } from \"../services\";\r\n\r\nexport default function Deposit(){\r\n  const { authFB } = useContext(AuthContextFB);\r\n  const[balance, setBalance] = useState(0);\r\n\r\n  const getAccount = async () => {\r\n    try {\r\n      if (authFB) {\r\n        const response = await accountAPI.getUser(authFB.uid);\r\n        return response.data;\r\n      }\r\n      } catch (error) {\r\n          console.log(error);\r\n          return\r\n      }   \r\n  }\r\n\r\nconst handle = (data) => {\r\n  let user;\r\n  getAccount()\r\n    .then((dataUsers) => {\r\n      user = dataUsers.filter(user => user.firebaseId === authFB.uid)\r\n      setBalance(user[0].balance)\r\n      console.log('balance', balance)\r\n    })\r\n    .then(async () => {\r\n      console.log('data from deposit', data)\r\n      if (Number(data.amount) > 0) {\r\n        console.log('deposit', data.amount)\r\n        let newbalance = Number(balance) + Number(data.amount)\r\n        setBalance(newbalance)\r\n        console.log('newbalance', balance)\r\n        await accountAPI.updated(user[0]._id, data.amount)\r\n        alert(`Transaction done, your balance is ${Number(data.amount) + Number(balance)}`)\r\n      } else {\r\n        alert(\"You can't make operations with negative amounts\")\r\n        return false\r\n      }\r\n      return true\r\n  })\r\n  }\r\n  handle();\r\n    return (\r\n      <BankForm\r\n      bgcolor=\"success\"\r\n      label=\"Deposit\"\r\n      handle={handle}\r\n      hideAmount={false}\r\n      successButton=\"Make another deposit\"\r\n        body={\r\n          <Fragment>\r\n          <h3> Your balance is:</h3>\r\n          <div>{balance}</div>\r\n          </Fragment>\r\n        }\r\n    />\r\n    )\r\n  }","import axios from 'axios';\r\nimport env from \"react-dotenv\";\r\n\r\nconst baseURL = env.API_URL\r\nconst token = localStorage.getItem('token')\r\nconst service = axios.create({\r\n    baseURL: baseURL,\r\n    headers: { authorization: `Bearer ${token}` },\r\n  })\r\n\r\nconst accountAPI = {\r\n    all: () => service.get('/account/all'),\r\n    getUser: (firebaseId) => service.get('/account', { params: { firebaseId: firebaseId} } ),\r\n    createUser: (data) => service.post('/account/create', data),\r\n    updated: (_id, amount) => service.put('/account/update', {_id: _id, amount: amount}),\r\n};\r\nexport { accountAPI };\r\n"],"names":["BankForm","bgcolor","bgheader","label","handle","hideAmount","successButton","authFB","useContext","AuthContextFB","useState","show","setShow","status","setStatus","amount","setAmount","balance","setBalance","userLoged","setUserLogged","name","setName","email","setEmail","password","setPassword","getBalance","accountAPI","response","data","console","log","validateDataUser","field","length","setTimeout","useEffect","then","user","filter","firebaseId","uid","header","body","Fragment","id","placeholder","value","onChange","e","currentTarget","type","isNaN","Number","target","alert","title","variant","color","disabled","buttonDisabled","onClick","className","to","Deposit","getAccount","dataUsers","newbalance","_id","baseURL","env","token","localStorage","getItem","service","axios","headers","authorization","all","get","getUser","params","createUser","post","updated","put"],"sourceRoot":""}