"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[538],{2627:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(5861),a=n(885),u=n(7757),s=n.n(u),o=n(2791),i=n(7496),c=n(9818),l=n(1523),d=n(9920),f=n(4171),p=n(9599),m=n(184);function b(e){var t=e.bgcolor,n=e.bgheader,u=e.label,b=e.handle,h=e.hideAmount,x=e.successButton,g=(0,o.useContext)(d.V).authFB,v=(0,o.useState)(!0),j=(0,a.Z)(v,2),Z=j[0],k=j[1],w=(0,o.useState)(""),y=(0,a.Z)(w,2),C=y[0],A=y[1],S=(0,o.useState)(""),N=(0,a.Z)(S,2),F=N[0],L=N[1],U=(0,o.useState)(""),B=(0,a.Z)(U,2),E=B[0],T=B[1],P=(0,o.useState)(""),D=(0,a.Z)(P,2),I=D[0],_=D[1],R=(0,o.useState)(""),V=(0,a.Z)(R,2),W=V[0],Y=V[1],z=(0,o.useState)(""),M=(0,a.Z)(z,2),O=M[0],q=M[1],G=(0,o.useState)(""),H=(0,a.Z)(G,2),J=H[0],K=H[1],Q=function(){var e=(0,r.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!g){e.next=9;break}return e.next=4,p.A.getUser(g.uid);case 4:return t=e.sent,_(!0),e.abrupt("return",t.data);case 9:_(!1),T(!1);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return");case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();function X(e,t){return e?!("password"===t&&e.length<8)||(A("Please enter at least 8 characters"),setTimeout((function(){return A("")}),3e3),!1):(A("Please enter "+t),setTimeout((function(){return A("")}),3e3),!1)}(0,o.useEffect)((function(){h||Q().then((function(e){var t=e[0];T(t.balance)}))}),[Z]);return(0,m.jsx)(f.Z,{bgcolor:t,bgheader:n,header:u,status:C,body:Z?(0,m.jsxs)(o.Fragment,{children:[h?(0,m.jsxs)(o.Fragment,{children:["Login"!==u&&(0,m.jsxs)(o.Fragment,{children:["Name",(0,m.jsx)("br",{}),(0,m.jsx)(c.Z,{name:"name",id:"name",placeholder:"Enter name",value:W,onChange:function(e){return Y(e.currentTarget.value)}}),(0,m.jsx)("br",{})]}),(0,m.jsx)("br",{}),"Email ",(0,m.jsx)("br",{}),(0,m.jsx)(c.Z,{name:"email",type:"email",id:"email",placeholder:"Enter email",value:O,onChange:function(e){return q(e.currentTarget.value)}}),(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),"Password",(0,m.jsx)("br",{}),(0,m.jsx)(c.Z,{type:"password",id:"password",placeholder:"Enter password",value:J,onChange:function(e){return K(e.currentTarget.value)}}),(0,m.jsx)("br",{})]}):(0,m.jsxs)(o.Fragment,{children:["Balance: ",I?E:null," ",(0,m.jsx)("br",{}),(0,m.jsx)("br",{}),u+" Amount",(0,m.jsx)("br",{}),(0,m.jsx)("input",{type:"input",id:"amount",placeholder:"Enter Amount",value:F,onChange:function(e){isNaN(Number(e.target.value))?alert("Only positive amounts are allowed"):L(e.target.value)}}),(0,m.jsx)("br",{})]}),(0,m.jsx)("br",{}),(0,m.jsx)(i.Z,{type:"submit",id:"submit",title:"Withdraw"===u||"Deposit"===u?"Confirm transaction":"Click to Login",variant:"contained",color:"primary",disabled:function(){if("Create Account"===u)return""===O&&""===J&&""===W;if("Login"===u)return""===O&&""===J;if(h){if(!E)return!1;if(E<=0)return!0}else{if("Withdraw"===u)return!E||!I||(""===F||0===F);if("Deposit"===u)return!I||(""===F||0===F)}}(),onClick:function(){if(h){if("Login"!==u&&!X(W,"name"))return;if(!X(O,"email"))return;if(!X(J,"password"))return}else if(!X(F,"amount"))return;b({name:W,email:O,password:J,amount:F}),k(!1)},children:u})]}):(0,m.jsxs)(o.Fragment,{children:[(0,m.jsx)(i.Z,{type:"submit",variant:"contained",color:"primary",onClick:function(){Y(""),q(""),K(""),L(""),k(!0)},children:x}),"Create Account"===u?(0,m.jsx)(i.Z,{type:"submit",variant:"contained",title:"Click to go the Login",color:"secundary",children:(0,m.jsx)(l.rU,{className:"nav-link",to:"/login",children:"Login"})}):null]})})}},9538:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var r=n(5861),a=n(885),u=n(7757),s=n.n(u),o=n(2791),i=n(2627),c=n(9920),l=n(9599),d=n(184);function f(){var e=(0,o.useContext)(c.V).authFB,t=(0,o.useState)(0),n=(0,a.Z)(t,2),u=n[0],f=n[1],p=function(){var t=(0,r.Z)(s().mark((function t(){var n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=6;break}return t.next=4,l.A.getUser(e.uid);case 4:return n=t.sent,t.abrupt("return",n.data);case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),console.log(t.t0),t.abrupt("return");case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}(),m=function(e){var t;p().then((function(e){t=e[0],f(t.balance)})).then((0,r.Z)(s().mark((function n(){var r;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(Number(e.amount)>0)){n.next=8;break}return r=Number(u)+Number(e.amount),f(r),n.next=5,l.A.updated(t._id,e.amount);case 5:alert("Transaction done, your balance is ".concat(Number(e.amount))),n.next=10;break;case 8:return alert("You can't make operations with negative amounts"),n.abrupt("return",!1);case 10:return n.abrupt("return",!0);case 11:case"end":return n.stop()}}),n)}))))};return m(),(0,d.jsx)(i.Z,{bgcolor:"success",label:"Deposit",handle:m,hideAmount:!1,successButton:"Make another deposit",body:(0,d.jsxs)(o.Fragment,{children:[(0,d.jsx)("h3",{children:" Your balance is:"}),(0,d.jsx)("div",{children:u})]})})}},9599:function(e,t,n){n.d(t,{A:function(){return i}});var r=n(4569),a=n.n(r),u=n(4075).Z.API_URL,s=localStorage.getItem("token"),o=a().create({baseURL:u,headers:{authorization:"Bearer ".concat(s)}}),i={all:function(){return o.get("/account/all")},getUser:function(e){return o.get("/account",{params:{firebaseId:e}})},createUser:function(e){return o.post("/account/create",e)},updated:function(e,t){return o.put("/account/update",{_id:e,amount:t})}}}}]);
//# sourceMappingURL=538.5da2896b.chunk.js.map